<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>GAMES101个人笔记-光线追踪</title>
      <link href="/posts/8491.html"/>
      <url>/posts/8491.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101个人笔记-几何</title>
      <link href="/posts/23425.html"/>
      <url>/posts/23425.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101个人笔记-光照、着色、图形管线</title>
      <link href="/posts/11171.html"/>
      <url>/posts/11171.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101个人笔记-光栅化</title>
      <link href="/posts/31310.html"/>
      <url>/posts/31310.html</url>
      
        <content type="html"><![CDATA[<p>屏幕是一个二维数组的标准数据集，是离散的，是一个典型的光栅成像设备</p><h1 id="光栅化"><a href="#光栅化" class="headerlink" title="光栅化"></a>光栅化</h1><p>光栅化即把图像呈现在屏幕上的过程</p><p><strong>像素</strong>是“最小的”图像单元，一个像素内的颜色，由r，g，b三个参数控制</p><p>由裁剪空间映射到屏幕空间（视口变换）公式如下：<br>$$<br>M_{viewport}&#x3D;<br>\left[\begin{matrix}<br>\frac{width}{2}&amp;0&amp;0&amp;\frac{width}{2}\<br>0&amp;\frac{height}{2}&amp;0&amp;\frac{height}{2}\<br>0&amp;0&amp;1&amp;0\<br>0&amp;0&amp;0&amp;1\<br>\end{matrix}\right]\<br>$$<br>经过矩阵变换后，再把屏幕空间中的多边形打散成三角形，成像到屏幕上，这就是光栅化的大致流程</p><p>计算机生成图像中，最基本的二维元素是三角形</p><p>三角形的特质：① 保证是平面；内外定义清晰；② 具有成熟的顶点插值方法</p><h1 id="不同的光栅化设备"><a href="#不同的光栅化设备" class="headerlink" title="不同的光栅化设备"></a>不同的光栅化设备</h1><p><strong>示波器oscilloscope</strong></p><p><strong>CRT屏幕：</strong></p><p>早期成像原理：阴极射线管</p><p>早期电视：光栅化的CRT屏幕，隔行扫描技术</p><p><strong>当今成像设备：平板显示设备</strong></p><p><strong>LCD液晶显示器：</strong>液晶会通过自己的不同排布，影响光的极化</p><p><strong>LED显示器：</strong>发光二极管点阵列</p><p><strong>电子水墨屏：</strong>电泳成像，刷新频率低</p><p><strong>OLED显示器：</strong>有机发光半导体</p><h1 id="最简单的光栅化方法：采样"><a href="#最简单的光栅化方法：采样" class="headerlink" title="最简单的光栅化方法：采样"></a>最简单的光栅化方法：采样</h1><p>采样，就是把函数离散化的一个过程</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for(int i = 0; i &lt; imax; i++)</span><br><span class="line">output[i] = f(i);</span><br></pre></td></tr></table></figure><p>为判断该为哪块像素着色，我们定义一个二进制函数：inside(tri,x,y)<br>$$<br>inside(tri,x,y)&#x3D;<br>\left{\begin {array}{rcl}<br>1&amp;point(x,y)\ in\ △t\<br>2&amp;otherwise<br>\end {array}\right.<br>$$</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for(int i = 0; i &lt; imax; i++)&#123;</span><br><span class="line">for(int j = 0; j &lt; jmax; j++)&#123;</span><br><span class="line">image[i][j] = inside(tri, i+0.5, j+0.5);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="采样优化"><a href="#采样优化" class="headerlink" title="采样优化"></a>采样优化</h1><p>Axis-Aligned Bounding Box：包围盒</p><p>在光栅化前先行判断像素点是否在三角形所在包围盒内，若不在，则直接忽略，不进光栅化的循环判断</p><p>Incremental Triangle Traversal：增量三角形遍历</p><p>看似更快，实则实现起来有一定难度，适用于细长的三角形</p><p>采样率不够高 -&gt; 锯齿，走样</p><h1 id="抗锯齿与深度缓冲"><a href="#抗锯齿与深度缓冲" class="headerlink" title="抗锯齿与深度缓冲"></a>抗锯齿与深度缓冲</h1><h2 id="采样伪影"><a href="#采样伪影" class="headerlink" title="采样伪影"></a>采样伪影</h2><p>锯齿（空间采样上的错误）</p><p>摩尔纹（如，采样时跳过奇数行奇数列）</p><p>马车轮效应：人眼在时间上的采样跟不上运动速度</p><p>采样伪影的原因：信号频率太快，采样速度跟不上</p><h2 id="信号处理"><a href="#信号处理" class="headerlink" title="信号处理"></a>信号处理</h2><p>傅里叶级数展开：任何一个周期函数，都可以表示为一系列sin和cos函数的线性组合加一个常数项的形式</p><p><img src="/posts/31310/college\闫令琪_图形学入门\101\图片\p6-抗锯齿\傅里叶级数变换.png" alt="傅里叶级数变换"></p><p>傅里叶变换，与傅里叶级数展开关系并不大，可以把图像从时域（空间域）变换到频域</p><p><em>用信号处理解释走样：同样一种采样方法，采样两种不同频率的函数，得出的结果无法被区分</em></p><h3 id="滤波"><a href="#滤波" class="headerlink" title="滤波"></a>滤波</h3><p>在频域内去除某一特定频率的函数</p><p>高通滤波器，低通滤波器，具体处理过程：</p><p><a href="https://zhuanlan.zhihu.com/p/365546998?utm_source=qq&utm_medium=social&utm_oi=605668290971045888">https://zhuanlan.zhihu.com/p/365546998?utm_source=qq&amp;utm_medium=social&amp;utm_oi=605668290971045888</a></p><p>滤波&#x3D;平均&#x3D;卷积</p><p>卷积核越大，保留的高频信息越少，低频信息越多，对应到频域图上，高频区域的亮度就降低</p><h2 id="走样的本质"><a href="#走样的本质" class="headerlink" title="走样的本质"></a>走样的本质</h2><table><thead><tr><th>采样的本质</th><th>走样的本质</th></tr></thead><tbody><tr><td><img src="/posts/31310/college\闫令琪_图形学入门\101\图片\p6-抗锯齿\采样的本质.png" alt="采样的本质"></td><td><img src="/posts/31310/college\闫令琪_图形学入门\101\图片\p6-抗锯齿\走样的本质.png" alt="走样的本质"></td></tr></tbody></table><p>采样率变低，采样间隔变大，波长变大，频率变小</p><p>Dense sampling&#x3D;&#x3D;稠密采样&#x3D;&#x3D;，图中信号已经首尾相接，意味着当前的采样频率Fs是不发生走样的最低限值</p><p>Sparse sampling&#x3D;&#x3D;稀疏采样&#x3D;&#x3D;，意味着频率Fs变大，间隔变小，就会产生混叠（近视也是因为这种混叠，可以类比一下）</p><p>所以，像素越低，采样率越低，采样频率越小，采样越稀疏，更容易走样</p><h2 id="反走样技术思路"><a href="#反走样技术思路" class="headerlink" title="反走样技术思路"></a>反走样技术思路</h2><p>1、增加屏幕分辨率，增加采样频率（成本高）</p><p>2、在采样之前，进行模糊（&#x2F;滤波）处理，<u>（注意，先模糊处理在采样，反过来是不可行的）</u>，模糊以后，将图像的边界弱化了，采样的时候，该区域对应的像素值可以起到过度缓冲的效果（低通滤波降低信号最高频率，使得可以用更低的采样频率完成采样）</p><p><img src="/posts/31310/college\闫令琪_图形学入门\101\图片\p6-抗锯齿\低通滤波反走样.png" alt="低通滤波反走样"></p><p>先采样后模糊之所以不可行，就是因为波形重叠的情况下截断依然会有重叠</p><p>通过像素做平均（卷积）来达到反走样：</p><p><img src="/posts/31310/college\闫令琪_图形学入门\101\图片\p6-抗锯齿\像素低通滤波.png" alt="像素低通滤波"></p><p>如何计算图形在某一像素内覆盖的比例？</p><p>一种近似方法：&#x3D;&#x3D;MSAA&#x3D;&#x3D;（muti-sample anti-aliasing）</p><p>每个像素多次采样，求平均，像素的颜色值为负责的区域内取样多次颜色值的平均</p><p>MSAA并没有通过物理上增加分辨率达到抗锯齿效果，这些网格只是为了检测覆盖率而已，并且现实应用并非用网格，而是用一些其他图形来达到效果，涉及一些随机数分布（怎样分布样本达到最好的覆盖效果）</p><p>那么，代价是什么？太浪费性能！优化：采样复用</p><p>3、其他抗锯齿方案</p><ul><li>&#x3D;&#x3D;FXAA&#x3D;&#x3D; (Fast Approximate AA)：先获得有锯齿的图，再后处理去除锯齿（很快）<ul><li>找到边界，换成没有锯齿的边界，（图像匹配）非常快</li><li>方法和采样无关，采样虽然有误，但是这种方法可以弥补</li></ul></li><li>&#x3D;&#x3D;TAA&#x3D;&#x3D; (Tem‘poral AA) ：时序信息，借助前面帧的信息<ul><li>最近刚刚兴起</li><li>静态场景，相邻两帧同一像素用不同的位置来sample</li><li>把MSAA的Sampling分布在时间上</li><li>运动情况下怎么办？</li></ul></li></ul><p>Super resolution &#x2F; super sampling 超分辨率</p><p>低分辨率显示器还原高分辨率图片，归根结底依旧是”样本不足“，解决方案举例：DLSS (Deep Learning Super Sampling) </p><h2 id="深度缓存-Zbuffering"><a href="#深度缓存-Zbuffering" class="headerlink" title="深度缓存 -Zbuffering"></a>深度缓存 -Zbuffering</h2><p>Painter’s Algorithm：画家算法，由远及近画画，近处画面覆盖远处画面</p><p>无法处理复杂的深度判断，例如三个三角形互相重叠</p><p>深度计算排序 算法复杂度：$O(log\ n)$</p><p>&#x3D;&#x3D;Z-buffer：对每个像素多存一个深度&#x3D;&#x3D;</p><p>实际编程中，z值越小表示越远，但为方便理解，下述伪代码中z越远越大</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for(each Triangle T)</span><br><span class="line">for(each sample(x,y,z) in T)</span><br><span class="line">if(z&lt;zbuffer[x,y])</span><br><span class="line">framebuffer[x,y]=rgb;</span><br><span class="line">zbuffer[x,y]=z;</span><br><span class="line">else</span><br><span class="line">;</span><br></pre></td></tr></table></figure><p>复杂度：O(n) for n triangles 并不是排序，而是求最值，需要保证三角形进入顺序和结果无关</p><p>tips：无法处理透明物体，详情参考《入门精要》第八章</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>GAMES101个人笔记-基础引入</title>
      <link href="/posts/40876.html"/>
      <url>/posts/40876.html</url>
      
        <content type="html"><![CDATA[<h1 id="一、引入"><a href="#一、引入" class="headerlink" title="一、引入"></a>一、引入</h1><p><img src="/posts/40876/%E5%85%89%E6%A0%85%E5%8C%96.png" alt="Alt text"></p><p>计算机图形学下关于“实时”的定义：&gt;30fps，&lt;30fps称为离线</p><p><strong>计算机视觉与计算机图形学的区别：</strong><br><img src="/posts/40876/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E4%B8%8E%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6%E7%9A%84%E5%8C%BA%E5%88%AB.png" alt="Alt text"></p><h1 id="二、线代基础"><a href="#二、线代基础" class="headerlink" title="二、线代基础"></a>二、线代基础</h1><h2 id="基础运算"><a href="#基础运算" class="headerlink" title="基础运算"></a>基础运算</h2><h3 id="叉乘基本运算："><a href="#叉乘基本运算：" class="headerlink" title="叉乘基本运算："></a>叉乘基本运算：</h3><p>$$<br>\displaylines{\vec{a}\times\vec{b}&#x3D;-\vec{b}\times\vec{a}\<br>\vec{a}\times\vec{a}&#x3D;\vec{0} \<br>\vec{a}\times(\vec{b}+\vec{c})&#x3D;\vec{a}\times\vec{b}+\vec{a}\times\vec{c} \<br>\vec{a}\times(k\vec{b})&#x3D;k(\vec{a}\times\vec{b})}<br>$$</p><p>图形学叉乘应用：判断左&#x2F;右&amp;内&#x2F;外</p><h3 id="正交坐标系定义"><a href="#正交坐标系定义" class="headerlink" title="正交坐标系定义"></a>正交坐标系定义</h3><p>$$<br>\displaylines{<br>||\vec{u}||&#x3D;||\vec{v}||&#x3D;||\vec{w}||\<br>\vec{u}\cdot\vec{v}&#x3D;\vec{v}\cdot\vec{w}&#x3D;\vec{w}\cdot\vec{u}\<br>\vec{w}&#x3D;\vec{u}\times\vec{v}（右手）\<br>\vec{p}&#x3D;(\vec{p}\cdot\vec{u})\vec{u}+(\vec{p}\cdot\vec{v})\vec{v}+(\vec{p}\cdot\vec{w})\vec{w}}<br>$$</p><h3 id="矩阵乘法"><a href="#矩阵乘法" class="headerlink" title="矩阵乘法"></a>矩阵乘法</h3><p>要第几行第几列，就去找第几行和第几列，左管行，右管列</p><p>设矩阵A和矩阵B，则：</p><p>1、AB和BA大多数情况下不等</p><p>2、(AB)C&#x3D;A(BC)</p><p>​  A(B+C) &#x3D; AB +AC</p><p>​  (A+B)C &#x3D;AC ＋BC&#x2F;&#x2F;只要不涉及前后交换</p><h3 id="矩阵和向量的乘法"><a href="#矩阵和向量的乘法" class="headerlink" title="矩阵和向量的乘法"></a>矩阵和向量的乘法</h3><p>总是把向量视作列向量并置于乘号右边</p><h3 id="矩阵转置（ij-ji）"><a href="#矩阵转置（ij-ji）" class="headerlink" title="矩阵转置（ij -&gt; ji）"></a>矩阵转置（ij -&gt; ji）</h3><p>$$<br>(AB)^T&#x3D;B^TA^T<br>$$</p><h3 id="单位矩阵"><a href="#单位矩阵" class="headerlink" title="单位矩阵"></a>单位矩阵</h3><p>$$<br>AA^{-1}&#x3D;A^{-1}A&#x3D;I\<br>AB^{-1}&#x3D;B^{-1}A^{-1}<br>$$</p><h3 id="向量乘法的矩阵形式"><a href="#向量乘法的矩阵形式" class="headerlink" title="向量乘法的矩阵形式"></a>向量乘法的矩阵形式</h3><p>$$<br>\vec{a}\cdot\vec{b}&#x3D;\vec{a}^T\vec{b}\<br>\vec{a}\times\vec{b}&#x3D;A^*b<br>$$</p><h2 id="向量变换"><a href="#向量变换" class="headerlink" title="向量变换"></a>向量变换</h2><h3 id="2d"><a href="#2d" class="headerlink" title="2d"></a>2d</h3><h4 id="线性变换"><a href="#线性变换" class="headerlink" title="线性变换"></a>线性变换</h4><table><thead><tr><th align="center">缩放</th><th align="center">切变</th></tr></thead><tbody><tr><td align="center"><img src="/posts/40876/%E7%BA%BF%E6%80%A7%E5%8F%98%E5%8C%96-%E7%BC%A9%E6%94%BE.png" alt="Alt text"></td><td align="center"><img src="/posts/40876/%E7%BA%BF%E6%80%A7%E5%8F%98%E5%8C%96-%E5%88%87%E5%8F%98.png" alt="Alt text"></td></tr><tr><td align="center"><strong>对称</strong></td><td align="center"><strong>旋转</strong></td></tr><tr><td align="center"><img src="/posts/40876/%E7%BA%BF%E6%80%A7%E5%8F%98%E5%8C%96-%E5%AF%B9%E7%A7%B0.png" alt="Alt text"></td><td align="center"><img src="/posts/40876/%E7%BA%BF%E6%80%A7%E5%8F%98%E5%8C%96-%E6%97%8B%E8%BD%AC.png" alt="Alt text"></td></tr></tbody></table><p>相同维度线性变化：<br>$$<br>x’&#x3D;ax+by\y’&#x3D;cx+dy\<br>\left[\begin{matrix}x’\y’\\end{matrix}\right]&#x3D;<br>\left[\begin{matrix}a&amp;b\c&amp;d\\end{matrix}\right]<br>\left[\begin{matrix}x\y\\end{matrix}\right]\<br>x’&#x3D;Mx<br>$$</p><h4 id="齐次坐标"><a href="#齐次坐标" class="headerlink" title="齐次坐标"></a>齐次坐标</h4><p>点(x,y,1)向量(x,y,0)则有：</p><p>点-点&#x3D;向量，向量$\pm$向量&#x3D;向量，点+向量&#x3D;点，点+点&#x3D;两点的中点</p><p>在齐次坐标中，$\left(\begin{matrix}x\y\w\end{matrix}\right)$都视作$\left(\begin{matrix}x&#x2F;w\y&#x2F;w\1\end{matrix}\right)$，其中$w≠0$</p><h4 id="仿射变换"><a href="#仿射变换" class="headerlink" title="仿射变换"></a>仿射变换</h4><p>&#x3D;&#x3D;仿射变化&#x3D;线性变换+平移&#x3D;&#x3D;</p><table><thead><tr><th><img src="/posts/40876/%E4%BB%BF%E5%B0%84%E5%8F%98%E5%8C%96.png" alt="Alt text"></th><th><img src="/posts/40876/%E4%BB%BF%E5%B0%84%E5%8F%98%E5%8C%96-2d%20transformation.png" alt="Alt text"></th></tr></thead></table><p>&#x3D;&#x3D;矩阵相乘不满足结合律&#x3D;&#x3D;</p><p>例如，先旋转再平移和先平移再旋转所得结果不一样</p><h4 id="变换合成（结合律的体现）"><a href="#变换合成（结合律的体现）" class="headerlink" title="变换合成（结合律的体现）"></a>变换合成（结合律的体现）</h4><p><img src="/posts/40876/%E5%90%88%E6%88%90%E5%8F%98%E6%8D%A2.png" alt="Alt text"></p><h3 id="3d"><a href="#3d" class="headerlink" title="3d"></a>3d</h3><table><thead><tr><th align="center">平移</th><th align="center">缩放</th></tr></thead><tbody><tr><td align="center"><img src="/posts/40876/%E5%B9%B3%E7%A7%BB.png" alt="Alt text"></td><td align="center"><img src="/posts/40876/%E7%BC%A9%E6%94%BE.png" alt="Alt text"></td></tr></tbody></table><table><thead><tr><th>旋转</th><th></th></tr></thead><tbody><tr><td><img src="/posts/40876/%E6%97%8B%E8%BD%AC1.png" alt="Alt text"></td><td><img src="/posts/40876/%E6%97%8B%E8%BD%AC2.png" alt="Alt text"></td></tr></tbody></table><p>3d旋转变换矩阵遵循循环对称：$X\times Y&#x3D;Z,Y\times Z&#x3D;X,Z\times X&#x3D;Y$</p><p>合成的旋转变换：$R_{xyz}(\alpha,\beta,\gamma)&#x3D;R_x(\alpha)R_y(\beta)R_z(\gamma)$</p><h4 id="罗德里格斯旋转公式"><a href="#罗德里格斯旋转公式" class="headerlink" title="罗德里格斯旋转公式"></a>罗德里格斯旋转公式</h4><p>绕旋转轴n旋转α角度<br>$$<br>R(n,\alpha)&#x3D;cos(\alpha)E+(1-cos(\alpha))nn^T+sin(\alpha)<br>\left(\begin{matrix}<br>0 &amp; -n_z&amp; n_y\<br>n_z &amp; 0&amp; -n_x\<br>-n_y &amp; n_x&amp; 0\<br>\end{matrix}\right)<br>$$<br>推导过程：<a href="https://zhuanlan.zhihu.com/p/113299607?utm_source=qq&utm_medium=social&utm_oi=605668290971045888">https://zhuanlan.zhihu.com/p/113299607?utm_source=qq&amp;utm_medium=social&amp;utm_oi=605668290971045888</a></p><p><strong>四元数：旋转与旋转之间的差值，具体内容略去</strong></p><h2 id="视图-相机变换"><a href="#视图-相机变换" class="headerlink" title="视图 &#x2F; 相机变换"></a>视图 &#x2F; 相机变换</h2><h3 id="如何将三维变成二维并在屏幕上显示出来"><a href="#如何将三维变成二维并在屏幕上显示出来" class="headerlink" title="如何将三维变成二维并在屏幕上显示出来"></a>如何将三维变成二维并在屏幕上显示出来</h3><p>1、模型变换 (M)2、相机变换 (V)3、投影变换 (P)</p><h3 id="定义相机属性"><a href="#定义相机属性" class="headerlink" title="定义相机属性"></a>定义相机属性</h3><p>1、位置 $\vec{e}$</p><p>2、视线方向 $\widehat{g}$</p><p>3、垂直方向 $\widehat{t}$</p><p>初始：up at Y, look at -Z</p><p>如果把摄像机和世界一起变换，那么照片是一样的，所以把摄像机变换到新坐标系的原点，其他所有物体也做同样的变换</p><h3 id="teg坐标系怎么转变为xyz坐标系"><a href="#teg坐标系怎么转变为xyz坐标系" class="headerlink" title="teg坐标系怎么转变为xyz坐标系"></a>teg坐标系怎么转变为xyz坐标系</h3><p>$M_{view}$ in Math?</p><p>$M_{view}$&#x3D;$R_{view}$$T_{view}$</p><p>1、先做平移，$T_{view}&#x3D;\left[\begin{matrix}1&amp;0&amp;0&amp;-x_e\0&amp;1&amp;0&amp;-y_e\0&amp;0&amp;1&amp;-z_e\0&amp;0&amp;0&amp;1\end{matrix}\right]$</p><p>2、再做旋转，顺着思路要把 $\widehat{g}$ 旋转到$-Z$坐标轴，把 $\widehat{t}$ 旋转到$Y$坐标轴，把$（g\times t）$旋转到 $x$ 坐标轴，但这样的旋转矩阵非常难写</p><p>​  所以采用逆向思路，把坐标轴移到相机坐标轴，通过逆操作写（该旋转矩阵为正交矩阵，其逆矩阵就是它的转置矩阵）（基变换）<br>$$ R^{-1}<em>{view}&#x3D;<br>\left[\begin{matrix}<br>x</em>{\widehat g\times \widehat t} &amp; x_t &amp; x_{-g} &amp; 0\<br>y_{\widehat g\times \widehat t} &amp; y_t &amp; y_{-g} &amp; 0\<br>z_{\widehat g\times \widehat t} &amp; z_t &amp; z_{-g} &amp; 0\<br>0 &amp; 0 &amp; 0 &amp; 1\<br>\end{matrix}\right]\<br>R_{view}&#x3D;\left[\begin{matrix}<br>x_{\widehat g\times \widehat t} &amp; y_{\widehat g\times \widehat t} &amp; z_{\widehat g\times \widehat t} &amp; 0\<br>x_t &amp; y_t &amp; z_t &amp; 0\<br>x_{-g} &amp; y_{-g} &amp; z_{-g} &amp; 0\<br>0 &amp; 0 &amp; 0 &amp; 1\<br>\end{matrix}\right]<br>$$</p><h3 id="投影变换（难点）"><a href="#投影变换（难点）" class="headerlink" title="投影变换（难点）"></a>投影变换（难点）</h3><p><img src="/posts/40876/%E6%AD%A3%E4%BA%A4or%E9%80%8F%E8%A7%86.png" alt="Alt text"></p><h4 id="正交投影"><a href="#正交投影" class="headerlink" title="正交投影"></a>正交投影</h4><p>相机位置无限远，没有远近概念（忽略深度信息）</p><p>步骤：先做平移，再做缩放，目标是吧投影全塞在 $[-1,1]^2$ 的长方体内</p><p><img src="/posts/40876/%E6%AD%A3%E4%BA%A4%E6%8A%95%E5%BD%B1%E6%AD%A5%E9%AA%A4.png" alt="Alt text"></p><h4 id="透视投影"><a href="#透视投影" class="headerlink" title="透视投影"></a>透视投影</h4><p>用的最广泛的投影，近大远小，</p><p>根据已知的$Near、Far、Fov、Aspect$确定透视投影的投影矩阵，如下<br>$$<br>M_{frustum}&#x3D;<br>\left[\begin{matrix}<br>\frac{cot\frac{FOV}{2}}{Aspect}&amp;0&amp;0&amp;0 \<br>0&amp;cot{\frac{FOV}{2}}&amp;0&amp;0 \<br>0&amp;0&amp;\frac{Near+Far}{Near-Far}&amp;-\frac{2Near·Far}{Near-Far} \<br>0&amp;0&amp;1&amp;0 \<br>\end{matrix}\right]<br>$$<br>具体证明见《unity shader入门精要》P79手写笔记</p><p>关于课上的思考问题，视锥体压缩成长方体以后，内部的点的z值是更偏向于近平面还是更偏向于远平面？</p><!-- <a href="链接"  title="标题" referrerPolicy="no-referrer" class="link_card"><div class="link_icon"><img src="图标" class="no-lightbox"></div><div class="link_content"><div class="link_title">标题</div><div class="link_desc">介绍</div></div></a> --><a href="https://zhuanlan.zhihu.com/p/122411512?utm_source=qq&utm_medium=social&utm_oi=605668290971045888" target="_blank" title="[图形学笔记]推导投影矩阵" referrerpolicy="no-referrer" class="link_card"><div class="link_icon"><svg t="1670307855063" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19066" width="200" height="200"><path d="M504.064 516.608m-384.256 0a384.256 384.256 0 1 0 768.512 0 384.256 384.256 0 1 0-768.512 0Z" fill="#009CF5" p-id="19068"/><path d="M746.112 270.464L472.448 485.12l63.104 63.104L750.08 274.56c2.304-2.688-1.28-6.144-3.968-4.096z" fill="#FF4C3A" p-id="19069"/><path d="M262.016 762.752l273.664-214.528-63.104-63.104-214.656 273.536c-2.176 2.688 1.28 6.144 4.096 4.096z" fill="#FFFFFF" p-id="19070"/><path d="M505.216 155.136c-3.2 0-5.888 2.56-5.888 5.888v53.504c0 3.2 2.56 5.888 5.888 5.888s5.888-2.56 5.888-5.888v-53.504c-0.128-3.2-2.688-5.888-5.888-5.888zM442.368 160.512c-3.2 0.512-5.376 3.584-4.736 6.784l9.344 52.736c0.512 3.2 3.584 5.376 6.784 4.736 3.2-0.512 5.376-3.584 4.736-6.784l-9.344-52.736c-0.512-3.2-3.584-5.376-6.784-4.736zM396.288 234.368c1.152 3.072 4.48 4.608 7.552 3.456 3.072-1.152 4.608-4.48 3.456-7.552l-18.304-50.304c-1.152-3.072-4.48-4.608-7.552-3.456-3.072 1.152-4.608 4.48-3.456 7.552l18.304 50.304zM348.928 257.408c1.664 2.816 5.248 3.712 7.936 2.176s3.712-5.248 2.176-7.936l-26.752-46.336c-1.664-2.816-5.248-3.712-7.936-2.176-2.816 1.664-3.712 5.248-2.176 7.936l26.752 46.336zM306.304 288.256c2.048 2.432 5.76 2.816 8.192 0.768 2.432-2.048 2.816-5.76 0.768-8.192l-34.432-40.96c-2.048-2.432-5.76-2.816-8.192-0.768-2.432 2.048-2.816 5.76-0.768 8.192l34.432 40.96zM269.696 326.144c2.432 2.048 6.144 1.792 8.192-0.768 2.048-2.432 1.792-6.144-0.768-8.192l-40.96-34.432c-2.432-2.048-6.144-1.792-8.192 0.768-2.048 2.432-1.792 6.144 0.768 8.192l40.96 34.432zM193.792 342.912l46.336 26.752c2.816 1.664 6.4 0.64 7.936-2.176 1.664-2.816 0.64-6.4-2.176-8.064L199.552 332.8c-2.816-1.664-6.4-0.64-7.936 2.176-1.664 2.688-0.64 6.272 2.176 7.936zM168.32 399.488l50.304 18.304c3.072 1.152 6.4-0.512 7.552-3.456 1.152-3.072-0.512-6.4-3.456-7.552l-50.304-18.304c-3.072-1.152-6.4 0.512-7.552 3.456-1.152 3.072 0.384 6.4 3.456 7.552zM207.872 457.344l-52.736-9.344c-3.2-0.512-6.272 1.536-6.784 4.736-0.512 3.2 1.536 6.272 4.736 6.784l52.736 9.344c3.2 0.512 6.272-1.536 6.784-4.736 0.512-3.2-1.536-6.272-4.736-6.784zM201.984 509.568H148.48c-3.2 0-5.888 2.56-5.888 5.888 0 3.2 2.56 5.888 5.888 5.888h53.504c3.2 0 5.888-2.56 5.888-5.888 0-3.2-2.56-5.888-5.888-5.888zM205.44 562.176l-52.736 9.344c-3.2 0.512-5.376 3.584-4.736 6.784 0.512 3.2 3.584 5.376 6.784 4.736l52.736-9.344c3.2-0.512 5.376-3.584 4.736-6.784s-3.584-5.248-6.784-4.736zM217.856 613.376l-50.304 18.304c-3.072 1.152-4.608 4.48-3.456 7.552 1.152 3.072 4.48 4.608 7.552 3.456l50.304-18.304c3.072-1.152 4.608-4.48 3.456-7.552-1.152-3.072-4.48-4.608-7.552-3.456zM238.976 661.504l-46.336 26.752c-2.816 1.664-3.712 5.248-2.176 8.064 1.664 2.816 5.248 3.712 8.064 2.176l46.336-26.752c2.816-1.664 3.712-5.248 2.176-8.064-1.664-2.816-5.248-3.712-8.064-2.176zM268.16 705.408l-40.96 34.432c-2.432 2.048-2.816 5.76-0.768 8.192 2.048 2.432 5.76 2.816 8.192 0.768l40.96-34.432c2.432-2.048 2.816-5.76 0.768-8.192-1.92-2.56-5.632-2.816-8.192-0.768zM304.512 743.424l-34.432 40.96c-2.048 2.432-1.792 6.144 0.768 8.192 2.432 2.048 6.144 1.792 8.192-0.768l34.432-40.96c2.048-2.432 1.792-6.144-0.768-8.192-2.304-1.92-6.016-1.664-8.192 0.768zM347.008 774.656l-26.752 46.336c-1.664 2.816-0.64 6.4 2.176 7.936 2.816 1.664 6.4 0.64 8.064-2.176l26.752-46.336c1.664-2.816 0.64-6.4-2.176-7.936-2.816-1.536-6.4-0.64-8.064 2.176zM394.24 798.08l-18.304 50.304c-1.152 3.072 0.512 6.4 3.456 7.552 3.072 1.152 6.4-0.512 7.552-3.456l18.304-50.304c1.152-3.072-0.512-6.4-3.456-7.552-3.072-1.152-6.528 0.384-7.552 3.456zM440.192 872.32c3.2 0.512 6.272-1.536 6.784-4.736l9.344-52.736c0.512-3.2-1.536-6.272-4.736-6.784-3.2-0.512-6.272 1.536-6.784 4.736l-9.344 52.736c-0.64 3.2 1.536 6.272 4.736 6.784zM502.912 878.08c3.2 0 5.888-2.56 5.888-5.888v-53.504c0-3.2-2.56-5.888-5.888-5.888-3.2 0-5.888 2.56-5.888 5.888v53.504c0 3.2 2.688 5.888 5.888 5.888zM549.632 815.232l9.344 52.736c0.512 3.2 3.584 5.376 6.784 4.736 3.2-0.512 5.376-3.584 4.736-6.784l-9.344-52.736c-0.512-3.2-3.584-5.376-6.784-4.736-3.2 0.512-5.248 3.584-4.736 6.784zM600.832 802.816l18.304 50.304c1.152 3.072 4.48 4.608 7.552 3.456 3.072-1.152 4.608-4.48 3.456-7.552L611.84 798.72c-1.152-3.072-4.48-4.608-7.552-3.456-3.072 1.152-4.608 4.48-3.456 7.552zM649.088 781.696l26.752 46.336c1.664 2.816 5.248 3.712 8.064 2.176 2.816-1.664 3.712-5.248 2.176-8.064l-26.88-46.336c-1.664-2.816-5.248-3.712-8.064-2.176-2.816 1.664-3.712 5.248-2.048 8.064zM692.864 752.384l34.432 40.96c2.048 2.432 5.76 2.816 8.192 0.768 2.432-2.048 2.816-5.76 0.768-8.192l-34.432-40.96c-2.048-2.432-5.76-2.816-8.192-0.768-2.56 2.048-2.816 5.76-0.768 8.192zM730.88 716.032l40.96 34.432c2.432 2.048 6.144 1.792 8.192-0.768 2.048-2.432 1.792-6.144-0.768-8.192l-40.96-34.432c-2.432-2.048-6.144-1.792-8.192 0.768-1.92 2.432-1.664 6.144 0.768 8.192zM762.112 673.664l46.336 26.752c2.816 1.664 6.4 0.64 8.064-2.176 1.664-2.816 0.64-6.4-2.176-7.936L768 663.552c-2.816-1.664-6.4-0.64-8.064 2.176-1.536 2.688-0.64 6.272 2.176 7.936zM785.536 626.432l50.304 18.304c3.072 1.152 6.4-0.512 7.552-3.456 1.152-3.072-0.512-6.4-3.456-7.552l-50.304-18.304c-3.072-1.152-6.4 0.512-7.552 3.456-1.152 3.072 0.384 6.4 3.456 7.552zM800.256 575.872l52.736 9.344c3.2 0.512 6.272-1.536 6.784-4.736 0.512-3.2-1.536-6.272-4.736-6.784l-52.736-9.344c-3.2-0.512-6.272 1.536-6.784 4.736-0.512 3.2 1.536 6.272 4.736 6.784zM800.256 517.76c0 3.2 2.56 5.888 5.888 5.888h53.504c3.2 0 5.888-2.56 5.888-5.888 0-3.2-2.56-5.888-5.888-5.888h-53.504c-3.328 0-5.888 2.56-5.888 5.888zM802.688 471.04l52.736-9.344c3.2-0.512 5.376-3.584 4.736-6.784-0.512-3.2-3.584-5.376-6.784-4.736l-52.736 9.344c-3.2 0.512-5.376 3.584-4.736 6.784 0.512 3.2 3.584 5.248 6.784 4.736zM790.272 419.84l50.304-18.304c3.072-1.152 4.608-4.48 3.456-7.552-1.152-3.072-4.48-4.608-7.552-3.456l-50.304 18.304c-3.072 1.152-4.608 4.48-3.456 7.552 1.152 2.944 4.48 4.608 7.552 3.456zM769.152 371.584l46.336-26.752c2.816-1.664 3.712-5.248 2.176-7.936-1.664-2.816-5.248-3.712-8.064-2.176l-46.336 26.752c-2.816 1.664-3.712 5.248-2.176 8.064 1.664 2.688 5.248 3.712 8.064 2.048zM739.84 327.808l40.96-34.432c2.432-2.048 2.816-5.76 0.768-8.192-2.048-2.432-5.76-2.816-8.192-0.768l-40.96 34.432c-2.432 2.048-2.816 5.76-0.768 8.192 2.048 2.56 5.76 2.816 8.192 0.768zM703.488 289.664l34.432-40.96c2.048-2.432 1.792-6.144-0.768-8.192-2.432-2.048-6.144-1.792-8.192 0.768l-34.432 40.96c-2.048 2.432-1.792 6.144 0.768 8.192 2.432 2.048 6.144 1.792 8.192-0.768zM661.12 258.56l26.752-46.336c1.664-2.816 0.64-6.4-2.176-7.936-2.816-1.664-6.4-0.64-8.064 2.176l-26.752 46.336c-1.664 2.816-0.64 6.4 2.176 7.936 2.816 1.536 6.4 0.64 8.064-2.176zM613.888 235.136l18.304-50.304c1.152-3.072-0.512-6.4-3.456-7.552-3.072-1.152-6.4 0.512-7.552 3.456L602.88 231.168c-1.152 3.072 0.512 6.4 3.456 7.552 3.072 1.024 6.4-0.512 7.552-3.584zM556.544 225.152c3.2 0.512 6.272-1.536 6.784-4.736l9.344-52.736c0.512-3.2-1.536-6.272-4.736-6.784-3.2-0.512-6.272 1.536-6.784 4.736l-9.344 52.736c-0.512 3.2 1.536 6.144 4.736 6.784zM273.536 290.432c2.432 2.432 6.528 2.432 8.96 0 2.432-2.432 2.432-6.528 0-8.96l-21.12-21.12c-2.432-2.432-6.528-2.432-8.96 0-2.432 2.432-2.432 6.528 0 8.96l21.12 21.12zM237.824 333.824c2.944 2.048 6.912 1.28 8.832-1.536 2.048-2.944 1.28-6.912-1.536-8.832l-24.448-17.152c-2.944-2.048-6.912-1.28-8.832 1.536s-1.28 6.912 1.536 8.832l24.448 17.152zM183.04 370.176l27.136 12.672c3.2 1.536 7.04 0.128 8.448-3.072 1.536-3.2 0.128-7.04-3.072-8.448l-27.136-12.672c-3.2-1.536-7.04-0.128-8.448 3.072-1.536 3.2-0.128 7.04 3.072 8.448zM194.688 423.68l-28.928-7.68c-3.456-0.896-6.912 1.152-7.808 4.48-0.896 3.456 1.152 6.912 4.48 7.808l28.928 7.68c3.456 0.896 6.912-1.152 7.808-4.48 0.896-3.456-1.152-6.912-4.48-7.808zM183.168 478.72l-29.824-2.56c-3.456-0.256-6.656 2.304-6.912 5.76-0.256 3.456 2.304 6.656 5.76 6.912l29.824 2.56c3.456 0.256 6.656-2.304 6.912-5.76 0.384-3.456-2.176-6.528-5.76-6.912zM181.504 535.04l-29.824 2.56c-3.456 0.256-6.144 3.456-5.76 6.912 0.256 3.456 3.456 6.144 6.912 5.76l29.824-2.56c3.456-0.256 6.144-3.456 5.76-6.912-0.256-3.456-3.328-6.016-6.912-5.76zM191.36 590.72l-28.928 7.68c-3.456 0.896-5.376 4.352-4.48 7.808 0.896 3.456 4.352 5.376 7.808 4.48l28.928-7.68c3.456-0.896 5.376-4.352 4.48-7.808-0.896-3.328-4.352-5.376-7.808-4.48zM207.232 644.224l-27.136 12.672c-3.2 1.536-4.608 5.248-3.072 8.448 1.536 3.2 5.248 4.608 8.448 3.072l27.136-12.672c3.2-1.536 4.608-5.248 3.072-8.448-1.408-3.2-5.248-4.48-8.448-3.072zM233.984 693.888l-24.448 17.152c-2.944 2.048-3.584 6.016-1.536 8.832 2.048 2.944 6.016 3.584 8.832 1.536l24.448-17.152c2.944-2.048 3.584-6.016 1.536-8.832-2.048-2.944-6.016-3.584-8.832-1.536zM310.912 775.552L293.76 800c-2.048 2.944-1.28 6.912 1.536 8.832 2.944 2.048 6.912 1.28 8.832-1.536l17.152-24.448c2.048-2.944 1.28-6.912-1.536-8.832-2.816-2.048-6.912-1.408-8.832 1.536zM349.184 840.704c3.2 1.536 7.04 0.128 8.448-3.072l12.672-27.136c1.536-3.2 0.128-7.04-3.072-8.448-3.2-1.536-7.04-0.128-8.448 3.072l-12.672 27.136c-1.408 3.2-0.128 6.912 3.072 8.448zM407.808 862.72c3.456 0.896 6.912-1.152 7.808-4.48l7.68-28.928c0.896-3.456-1.152-6.912-4.48-7.808-3.456-0.896-6.912 1.152-7.808 4.48l-7.68 28.928c-0.896 3.328 1.152 6.912 4.48 7.808zM469.376 874.112c3.456 0.256 6.656-2.304 6.912-5.76l2.56-29.824c0.256-3.456-2.304-6.656-5.76-6.912-3.456-0.256-6.656 2.304-6.912 5.76l-2.56 29.824c-0.256 3.584 2.304 6.656 5.76 6.912zM522.496 839.168l2.56 29.824c0.256 3.456 3.456 6.144 6.912 5.76 3.456-0.256 6.144-3.456 5.76-6.912l-2.56-29.824c-0.256-3.456-3.456-6.144-6.912-5.76-3.456 0.256-6.016 3.328-5.76 6.912zM578.176 830.976l7.68 28.928c0.896 3.456 4.352 5.376 7.808 4.48 3.456-0.896 5.376-4.352 4.48-7.808l-7.68-28.928c-0.896-3.456-4.352-5.376-7.808-4.48-3.328 0.896-5.376 4.48-4.48 7.808zM631.68 813.312l12.672 27.136c1.536 3.2 5.248 4.608 8.448 3.072 3.2-1.536 4.608-5.248 3.072-8.448l-12.672-27.136c-1.536-3.2-5.248-4.608-8.448-3.072-3.2 1.536-4.48 5.248-3.072 8.448zM681.344 786.688l17.152 24.448c2.048 2.944 6.016 3.584 8.832 1.536 2.944-2.048 3.584-6.016 1.536-8.832l-17.152-24.448c-2.048-2.944-6.016-3.584-8.832-1.536-2.944 1.92-3.584 5.888-1.536 8.832zM725.504 751.744l21.12 21.12c2.432 2.432 6.528 2.432 8.96 0 2.432-2.432 2.432-6.528 0-8.96l-21.12-21.12c-2.432-2.432-6.528-2.432-8.96 0-2.432 2.432-2.432 6.528 0 8.96zM763.008 709.76l24.448 17.152c2.944 2.048 6.912 1.28 8.832-1.536 2.048-2.944 1.28-6.912-1.536-8.832l-24.448-17.152c-2.944-2.048-6.912-1.28-8.832 1.536-2.048 2.816-1.408 6.784 1.536 8.832zM792.576 661.888l27.136 12.672c3.2 1.536 7.04 0.128 8.448-3.072 1.536-3.2 0.128-7.04-3.072-8.448l-27.136-12.672c-3.2-1.536-7.04-0.128-8.448 3.072-1.536 3.2-0.128 6.912 3.072 8.448zM813.44 609.536l28.928 7.68c3.456 0.896 6.912-1.152 7.808-4.48 0.896-3.456-1.152-6.912-4.48-7.808l-28.928-7.68c-3.456-0.896-6.912 1.152-7.808 4.48-0.896 3.456 1.024 6.912 4.48 7.808zM824.832 554.368l29.824 2.56c3.456 0.256 6.656-2.304 6.912-5.76 0.256-3.456-2.304-6.656-5.76-6.912l-29.824-2.56c-3.456-0.256-6.656 2.304-6.912 5.76-0.256 3.584 2.304 6.656 5.76 6.912zM826.624 498.176l29.824-2.56c3.456-0.256 6.144-3.456 5.76-6.912-0.256-3.456-3.456-6.144-6.912-5.76l-29.824 2.56c-3.456 0.256-6.144 3.456-5.76 6.912 0.256 3.456 3.328 6.016 6.912 5.76zM818.432 442.368l28.928-7.68c3.456-0.896 5.376-4.352 4.48-7.808-0.896-3.456-4.352-5.376-7.808-4.48l-28.928 7.68c-3.456 0.896-5.376 4.352-4.48 7.808 0.896 3.456 4.48 5.376 7.808 4.48zM800.768 388.992l27.136-12.672c3.2-1.536 4.608-5.248 3.072-8.448-1.536-3.2-5.248-4.608-8.448-3.072l-27.136 12.672c-3.2 1.536-4.608 5.248-3.072 8.448 1.536 3.072 5.248 4.48 8.448 3.072zM774.144 339.328l24.448-17.152c2.944-2.048 3.584-6.016 1.536-8.832-2.048-2.944-6.016-3.584-8.832-1.536L766.848 328.96c-2.944 2.048-3.584 6.016-1.536 8.832 1.92 2.816 5.888 3.584 8.832 1.536zM697.216 257.664l17.152-24.448c2.048-2.944 1.28-6.912-1.536-8.832-2.944-2.048-6.912-1.28-8.832 1.536l-17.152 24.448c-2.048 2.944-1.28 6.912 1.536 8.832 2.816 2.048 6.784 1.408 8.832-1.536zM658.944 192.512c-3.2-1.536-7.04-0.128-8.448 3.072l-12.672 27.136c-1.536 3.2-0.128 7.04 3.072 8.448 3.2 1.536 7.04 0.128 8.448-3.072l12.672-27.136c1.408-3.2 0-7.04-3.072-8.448zM600.192 170.496c-3.456-0.896-6.912 1.152-7.808 4.48l-7.68 28.928c-0.896 3.456 1.152 6.912 4.48 7.808 3.456 0.896 6.912-1.152 7.808-4.48l7.68-28.928c1.024-3.328-1.024-6.912-4.48-7.808zM534.912 201.6c3.456 0.256 6.656-2.304 6.912-5.76l2.56-29.824c0.256-3.456-2.304-6.656-5.76-6.912-3.456-0.256-6.656 2.304-6.912 5.76l-2.56 29.824c-0.256 3.456 2.304 6.528 5.76 6.912zM476.032 158.464c-3.456 0.256-6.144 3.456-5.76 6.912l2.56 29.824c0.256 3.456 3.456 6.144 6.912 5.76 3.456-0.256 6.144-3.456 5.76-6.912l-2.56-29.824c-0.256-3.456-3.328-6.016-6.912-5.76zM422.144 173.312c-0.896-3.456-4.352-5.376-7.808-4.48-3.456 0.896-5.376 4.352-4.48 7.808l7.68 28.928c0.896 3.456 4.352 5.376 7.808 4.48 3.456-0.896 5.376-4.352 4.48-7.808l-7.68-28.928zM376.448 219.776l-12.672-27.136c-1.536-3.2-5.248-4.608-8.448-3.072-3.2 1.536-4.608 5.248-3.072 8.448L364.8 225.28c1.536 3.2 5.248 4.608 8.448 3.072 3.2-1.536 4.608-5.376 3.2-8.576zM316.416 253.824c2.048 2.944 6.016 3.584 8.832 1.536 2.944-2.048 3.584-6.016 1.536-8.832l-17.152-24.448c-2.048-2.944-6.016-3.584-8.832-1.536-2.944 2.048-3.584 6.016-1.536 8.832l17.152 24.448z" fill="#FFFFFF" p-id="19071"/></svg></div><div class="link_content"><div class="link_title">[图形学笔记]推导投影矩阵</div></div></a>]]></content>
      
      
      
        <tags>
            
            <tag> GAMES101 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
